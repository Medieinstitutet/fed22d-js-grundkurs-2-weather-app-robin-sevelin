(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function a(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerpolicy&&(n.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?n.credentials="include":e.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(e){if(e.ep)return;e.ep=!0;const n=a(e);fetch(e.href,n)}})();const u=document.querySelector(".error-container"),d=document.querySelector(".temperature-value p"),g=document.querySelector(".location p"),m=document.querySelector(".description p"),y=document.querySelector(".icon"),f=document.querySelector(".wind p"),p=document.querySelector(".feels-like p"),h=document.querySelector(".local-time p"),k=document.querySelector(".date p"),b=document.querySelector(".visibility"),w=document.querySelector("#get-position"),i=new Date,M="bf8a6a9e6c78c59cdb9e6c5aa6b2eccc",t={city:"",country:"",temp:0,feels_like:0,description:"",icon:"",wind:0,visibility:0},c={winterNightBackground:"url(background-imgs/winter-night-time.webp)",winterDayBackground:"url(background-imgs/winter-day-time.webp)",dayBackground:"url(background-imgs/day-time.webp)",nightBackground:"url(background-imgs/night-time.webp)"};function v(){g!==null&&d!==null&&m!==null&&y!==null&&p!==null&&f!==null&&b!==null&&(g.innerHTML=`${t.city}, ${t.country}`,d.innerHTML=`${t.temp}&#176;<span> C</span>`,p.innerHTML=`k\xE4nns som ${t.feels_like}<span>&#176; C</span>`,m.innerHTML=t.description,y.innerHTML=`<img src="/weather-icons/${t.icon}.png" loading="lay" alt="${t.description}" width="100" height="100" />`,f.innerHTML=`vind ${t.wind} m/s`,b.innerHTML=`sikt ${t.visibility} km`)}function L(){u!==null&&(u.style.display="block",u.innerHTML='"lyckades inte h\xE4mta data"')}async function S(s){const{latitude:o,longitude:a}=s.coords,r=`https://api.openweathermap.org/data/2.5/forecast?id=524901&units=metric&lang=sv&lat=${o}&lon=${a}&appid=${M}`;await fetch(r).then(e=>e.json()).then(e=>{t.city=e.city.name,t.country=e.city.country,t.temp=Math.round(e.list[0].main.temp),t.description=e.list[0].weather[0].description,t.feels_like=Math.round(e.list[0].main.feels_like),t.icon=e.list[0].weather[0].icon,t.wind=Math.round(e.list[0].wind.speed),t.visibility=Math.round(e.list[0].visibility/1e3),v()}).catch(L)}function T(){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(S,L)}w!==null&&w.addEventListener("click",T);function q(){i.getHours()<7||i.getHours()>17?i.getMonth()>9||i.getMonth()<3?document.body.style.backgroundImage=c.winterNightBackground:document.body.style.backgroundImage=c.nightBackground:i.getMonth()<9||i.getMonth()>3?document.body.style.backgroundImage=c.winterDayBackground:document.body.style.backgroundImage=c.dayBackground}function H(){h!=null&&k!=null&&(k.innerHTML=i.toLocaleDateString(),h.innerHTML=i.toLocaleTimeString(navigator.language,{hour:"2-digit",minute:"2-digit"})),q()}H();
